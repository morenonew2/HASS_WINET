title: WINET
path: winet
icon: mdi:stove
theme: noctis-grey
badges: []
cards:
  - type: custom:button-card
    entity: sensor.status_description_stufa
    icon: mdi:stove
    aspect_ratio: 1/1
    name: Stato attuale Piazzetta P963
    show_state: true
    show_name: true
    entity_picture: /local/Pictures/P963.png
    show_entity_picture: true
    card_size: 20
    state:
      - value: 'OFF'
        styles:
          state:
            - color: red
      - value: 'ON'
        styles:
          state:
            - color: green
        entity_picture: /local/Pictures/P963_on.png
    custom_fields:
      liv-pellet:
        card:
          type: custom:bar-card
          entity: sensor.livello_pellet_vl53l0x_distance
          name: Livello Pellet
          height: 30px
          min: 0
          max: 100
          severity:
            - color: Red
              from: 0
              to: 35
            - color: Orange
              from: 35
              to: 75
            - color: Green
              from: 75
              to: 100
          card_mod:
            style: |
              ha-card { 
                background-color: trasparent; 
                box-shadow: none;
                border-color: white;
                height: 10px;
                margin-bottom: 30px;
                visibility: visible;          
                }
              bar-card-card { 
                margin-left: -10px; 
                margin-bottom: -3px; 
                margin-top: -3px; 
              }
              bar-card-currentbar, bar-card-backgroundbar { 
                border-radius: 0.7em; 
                #height: 0px;
              }
              bar-card-value { 
                overflow; 
                padding-left: 10px; 
                margin: 0px; 
                
              }
              .card-content { 
                text-align: start;
                padding: 0px;
              }      
      impostaz:
        card:
          type: custom:button-card
          icon: mdi:cog-outline
          name: prova
          show_name: false
          tap_action:
            action: fire-dom-event
            browser_mod:
              service: browser_mod.popup
              data:
                dismissable: true
                autoclose: false
                title: impostazioni
                size: normal
                right_button: Close
                content:
                  type: entities
                  entities:
                    - entity: input_boolean.potenze_winet
                      name: Aumenta valori potenza
                    - input_text.valore_ip_locale_stufa
                    - entity: input_boolean.water_stufa
                      name: Visualizza parametri acqua
                    - input_boolean.vis_scheda_livello_pellet
          styles:
            icon:
              - height: 160px
              - width: 160px
            card:
              - border-color: white
              - height: 55px
              - width: 55px
              - margin-left: 250px
      select-water:
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              tap_action:
                action: call-service
                service: input_number.increment
                target:
                  entity_id: input_number.scegli_temperatura_water
              color_type: card
              color: rgb(223, 255, 97)
              icon: mdi:arrow-up-bold-outline
              size: 100%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - '--mdc-ripple-color': green
                  - '--mdc-ripple-press-opacity': 0.5
            - type: custom:button-card
              tap_action:
                action: call-service
                service: input_number.decrement
                target:
                  entity_id: input_number.scegli_temperatura_water
              color_type: card
              color: rgb(223, 255, 97)
              icon: mdi:arrow-down-bold-outline
              size: 100%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - '--mdc-ripple-color': green
                  - '--mdc-ripple-press-opacity': 0.5
            - type: custom:button-card
              color_type: card
              show_label: true
              label: Imposta temp. acqua
              styles:
                label:
                  - font-size: 12px
            - type: custom:button-card
              color_type: card
              name: Setpoint
              show_name: false
              entity: input_number.scegli_temperatura_water
              icon: none
              size: 25%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - font-size: 24px
              show_state: true
            - type: custom:button-card
              icon: mdi:content-save
              show_name: false
              tap_action:
                action: call-service
                confirmation:
                  text: Vuoi proseguire?
                service: rest_command.set_temperatura_water
                target: {}
              color_type: card
              color: rgb(255, 97, 97)
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - font-size: 20px
                  - '--mdc-ripple-color': yellow
                  - '--mdc-ripple-press-opacity': 0.5
      select-power:
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              tap_action:
                action: call-service
                service: input_select.select_next
                data:
                  cycle: true
                target:
                  entity_id: input_select.seleziona_potenza
              color_type: card
              color: rgb(223, 255, 97)
              icon: mdi:arrow-up-bold-outline
              size: 100%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - '--mdc-ripple-color': green
                  - '--mdc-ripple-press-opacity': 0.5
            - type: custom:button-card
              tap_action:
                action: call-service
                service: input_select.select_previous
                target:
                  entity_id: input_select.seleziona_potenza
              color_type: card
              color: rgb(223, 255, 97)
              icon: mdi:arrow-down-bold-outline
              size: 100%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - '--mdc-ripple-color': green
                  - '--mdc-ripple-press-opacity': 0.5
            - type: custom:button-card
              color_type: card
              show_label: true
              label: Imposta Potenza
              styles:
                label:
                  - font-size: 12px
            - type: custom:button-card
              color_type: card
              name: Setpoint
              show_name: false
              entity: input_select.seleziona_potenza
              icon: none
              size: 25%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - font-size: 24px
              show_state: true
            - type: custom:button-card
              icon: mdi:content-save
              show_name: false
              tap_action:
                action: call-service
                confirmation:
                  text: Vuoi proseguire?
                service: rest_command.set_power
                target: {}
              color_type: card
              color: rgb(255, 97, 97)
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - font-size: 20px
                  - '--mdc-ripple-color': yellow
                  - '--mdc-ripple-press-opacity': 0.5
      select-temp:
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              tap_action:
                action: call-service
                service: input_number.increment
                target:
                  entity_id: input_number.scegli_temperatura
              color_type: card
              color: rgb(223, 255, 97)
              icon: mdi:arrow-up-bold-outline
              size: 100%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - '--mdc-ripple-color': green
                  - '--mdc-ripple-press-opacity': 0.5
            - type: custom:button-card
              tap_action:
                action: call-service
                service: input_number.decrement
                target:
                  entity_id: input_number.scegli_temperatura
              color_type: card
              color: rgb(223, 255, 97)
              icon: mdi:arrow-down-bold-outline
              size: 100%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - '--mdc-ripple-color': green
                  - '--mdc-ripple-press-opacity': 0.5
            - type: custom:button-card
              color_type: card
              show_label: true
              label: Imposta temp.
              styles:
                label:
                  - font-size: 12px
            - type: custom:button-card
              color_type: card
              name: Setpoint
              show_name: false
              entity: input_number.scegli_temperatura
              icon: none
              size: 25%
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - font-size: 24px
              show_state: true
            - type: custom:button-card
              name: Save
              icon: mdi:content-save
              show_name: false
              tap_action:
                action: call-service
                confirmation:
                  text: Vuoi proseguire?
                service: rest_command.set_temperatura
                target: {}
              color_type: card
              color: rgb(255, 97, 97)
              styles:
                card:
                  - height: 40px
                  - width: 60px
                  - font-size: 20px
                  - '--mdc-ripple-color': yellow
                  - '--mdc-ripple-press-opacity': 0.5
      button:
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              icon: mdi:power
              name: Accensione
              show_name: false
              entity: switch.winet
              state:
                - value: 'off'
                  styles:
                    card:
                      - background-color: red
                    icon:
                      - color: white
                - value: 'on'
                  styles:
                    card:
                      - background-color: green
                    icon:
                      - color: yellow
              styles:
                card:
                  - height: 100px
                  - padding-left: 0px
                  - text-align: start
              lock:
                enabled: true
                duration: 10
                unlock: hold
              tap_action:
                action: toggle
      dati:
        card:
          type: custom:bar-card
          height: 30
          width: 70
          entities:
            - entity: sensor.temperatura_aria
              name: Temp. ambiente
              icon: mdi:thermometer
              entity_row: true
              min: -10
              max: 40
              color: white
              severity:
                - color: lightblue
                  from: -10
                  to: 15
                - color: lightgreen
                  from: 15
                  to: 25
                - color: red
                  from: 25
                  to: 40
              type: custom:bar-card
            - entity: sensor.temperatura_aria_impostata
              name: Temp. desiderata
              icon: mdi:thermometer
              entity_row: true
              min: 10
              max: 30
              color: white
              severity:
                - color: lightblue
                  from: 10
                  to: 20
                - color: lightgreen
                  from: 20
                  to: 30
              type: custom:bar-card
            - entity: sensor.potenza_impostata
              icon: mdi:fire-circle
              color: red
              min: 1
              max: 4
            - entity: sensor.temperatura_fumi
              icon: mdi:temperature-celsius
              min: 30
              max: 285
              unit_of_measurement: °C
            - entity: sensor.n_giri_estrattore_fumi
            - entity: sensor.temperatura_acqua_impostata
              min: 40
              max: 80
            - entity: sensor.temperatura_impostata
              type: custom:bar-card
              min: 40
              max: 80
          entity_row: true
          card_mod:
            style: |
              ha-card { 
                background-color: transparent; 
                box-shadow: none;
                border-color: white;
                margin-bottom: 10px
              }
              bar-card-card { 
                margin-left: -10px; 
                margin-bottom: -3px; 
                margin-top: -3px; 
              }
              bar-card-currentbar, bar-card-backgroundbar { 
                border-radius: 0.7em; 
              }
              bar-card-value { 
                overflow; 
                visible; 
                padding-left: 10px; 
                margin: 10px;
                font-size: 20px;
              }
              .card-content { 
                text-align: start; 
                padding: 0px; 
              }
    styles:
      custom_fields:
        select-water:
          - margin-bottom: 5px
          - height: |
              [[[
                  if (states['input_boolean.water_stufa'].state != 'on')
                    return "0px";
              ]]]       
          - visibility: |
              [[[
                  if (states['input_boolean.water_stufa'].state != 'on')
                    return "hidden";
                  return "visible"  
              ]]] 
        select-power:
          - margin-bottom: 5px
        select-temp:
          - margin-bottom: 5px
      state:
        - font-size: 25px;
      card:
        - background-color: white
        - border-radius: 2%
        - padding: 0%
        - padding-bottom: 30px
        - font-size: 15px
        - font-family: Oswald
        - text-transform: uppercase
        - height: auto
        - width: auto
        - margin-left: 0px
      grid:
        - grid-template-areas: >-
            "i i impostaz" "i i n" "i i s" "dati dati dati" "liv-pellet
            liv-pellet liv-pellet" "select-water select-water select-water"
            "select-temp select-temp select-temp" "select-power select-power
            select-power" "button button button" 
        - grid-template-columns: 60px 60px ;
        - grid-template-rows: auto
        - column-gap: 1px
        - row-gap: 0px
        - border: solid 0px
      entity_picture:
        - width: 100%
        - height: 100%
        - object-fit: contain
title: WINET
path: winet
visible:
  - user: 8f17ad42385547abbff59ff1e2c51ed9
  - user: a10f062277f841089791111ca11b8cf1
theme: Graphite
badges: []
cards:
  - type: entities
    entities:
      - type: section
        label: FUNZIONAMENTO
      - type: custom:hui-element
        card_type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: picture-entity
                entity: sensor.status_stufa
                show_name: false
                show_state: false
                image: /local/Pictures/stove_off.png
                state_image:
                  'ON': /local/Pictures/stove_on.png
                  'OFF': /local/Pictures/stove_off.png
                  FINAL CLEANING: /local/Pictures/stove_final.png
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: Statistiche
                      style: >
                        --popup-background-color:
                        var(--secondary-background-color);

                        --dialog-backdrop-filter: blur(2em)
                        brightness(0.75);
                      content:
                        type: entities
                        entities:
                          - entity: sensor.stassid_stove
                          - entity: sensor.mac_stove
                          - entity: sensor.id_stove
              - type: vertical-stack
                cards:
                  - type: entities
                    entities:
                      - entity: sensor.status_description_stufa
                        icon: mdi:state-machine
                        name: Stato
                        secondary_info: none
                        card_mod:
                          style: |
                            :host {
                              font-size: 20px;         
                              {% if states('sensor.status_description_stufa') == "OFF" %}
                              --paper-item-icon-color: red;
                              color: red;
                              {% else %}
                              --paper-item-icon-color: green;
                              color: green;
                              {% endif %};
                            }
                      - type: custom:hui-element
                        card_type: gauge
                        entity: sensor.potenza_impostata
                        min: 1
                        max: 9
                        needle: true
                        severity:
                          green: 0
                          yellow: 0
                          red: 0
                      - type: custom:hui-element
                        card_type: gauge
                        entity: sensor.n_giri_estrattore_fumi
                        unit: rpm
                        needle: true
                        severity:
                          green: 1000
                          yellow: 1999
                          red: 3000
                        max: 3500
      - entity: sensor.temperatura_aria
        name: Ambiente
      - entity: sensor.temperatura_aria_impostata
        name: Impostazione temperatura
      - entity: sensor.temperatura_fumi
        name: Temperatura estrazione fumi
      - type: conditional
        conditions:
          - entity: input_boolean.water_stufa
            state: 'on'
        row:
          entity: sensor.temperatura_impostata
      - type: conditional
        conditions:
          - entity: input_boolean.water_stufa
            state: 'on'
        row:
          entity: sensor.temperatura_acqua_impostata
      - type: divider
      - type: custom:hui-element
        card_type: vertical-stack
        cards:
          - type: tile
            entity: climate.piazzetta
            show_entity_picture: true
            entity_picture: /local/Pictures/P963.png
            hide_state: false
            color: accent
            name: 'Termostato '
            state_content:
              - state
              - current_temperature
              - temperature
            features:
              - type: climate-hvac-modes
                hvac_modes:
                  - 'off'
                  - heat
      - type: custom:paper-buttons-row
        position: center
        buttons:
          - icon: hass:cog-outline
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  style: |
                    --popup-background-color:
                      var(--secondary-background-color);
                    --dialog-backdrop-filter: blur(2em) brightness(0.75);
                  dismissable: true
                  autoclose: false
                  size: normal
                  right_button: Close
                  content:
                    type: custom:layout-card
                    layout_type: masonry
                    layout: {}
                    cards:
                      - type: vertical-stack
                        title: Impostazioni
                        cards:
                          - type: entities
                            entities:
                              - entity: input_boolean.water_stufa
                                name: Visual. temperatura acqua
                              - entity: input_boolean.potenze_winet
                                name: Gestisci valori potenza
                              - entity: input_boolean.attiva_cronotermostato
                          - features:
                              - style: slider
                                type: numeric-input
                            type: tile
                            entity: input_number.scegli_temperatura
                            vertical: false
                            icon_tap_action:
                              action: call-service
                              service: rest_command.set_temperatura
                              target: {}
                            show_entity_picture: true
                            hide_state: false
                            icon: mdi:content-save
                            name: Temperatura impostata
                            color: cyan
                            card_mod:
                              style:
                                ha-tile-info$: |
                                  .secondary {
                                    font-size: 20px !important;
                                  } 
                                  .primary {
                                    color: var(--entity-warning-color) !important;
                                  }
                          - features:
                              - style: slider
                                type: numeric-input
                            type: tile
                            entity: input_number.scegli_temperatura_water
                            name: Temperatura acqua
                            icon_tap_action:
                              action: call-service
                              service: rest_command.set_temperatura_water
                              target: {}
                            icon: mdi:content-save
                            hide_state: false
                            color: light-blue
                            card_mod:
                              style:
                                ha-tile-info$: |
                                  .secondary {
                                    font-size: 20px !important;
                                  } 
                                  .primary {
                                    color: var(--entity-warning-color) !important;
                                  }
                          - features:
                              - type: select-options
                            type: tile
                            entity: input_select.seleziona_potenza
                            name: Potenza funzionamento
                            color: red
                            icon: mdi:content-save
                            vertical: false
                            hide_state: true
                            icon_tap_action:
                              action: call-service
                              service: rest_command.set_power
                              target: {}
                          - type: tile
                            entity: input_text.valore_ip_locale_stufa
                            color: brown
                            show_entity_picture: false
                            state_content: state
                            icon_tap_action:
                              action: call-service
                              service: ''
                            card_mod:
                              style:
                                ha-tile-info$: |
                                  .secondary {
                                    font-size: 20px !important;
                                  } 
                                  .primary {
                                    color: var(--entity-warning-color) !important;
                                  }   
          - icon: mdi:chart-line
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  style: |
                    --popup-background-color:
                      var(--secondary-background-color);
                    --dialog-backdrop-filter: blur(2em) brightness(0.75);
                  dismissable: true
                  autoclose: false
                  title: Grafico temperature nelle 6 ore
                  size: normal
                  right_button: Close
                  content:
                    type: custom:layout-card
                    layout_type: masonry
                    layout: {}
                    cards:
                      - type: history-graph
                        entities:
                          - entity: sensor.temperatura_aria
                          - entity: sensor.temperatura_aria_impostata
                        hours_to_show: 6
                        title: Variazione Temperature in 6 ore
    card_mod:
      style: |
        ha-card {
          font-family: oswald;
          font-size: 20px;

        }
  - type: vertical-stack
    cards:
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.attiva_cronotermostato
            state: 'on'
        card:
          type: custom:scheduler-card
          include:
            - climate
            - climate.piazzetta
          exclude:
            - climate.camera_matteo
            - climate.comet_dect_1
            - climate.matrimoniale
          title: true
          sort_by:
            - state
            - relative-time
          display_options:
            primary_info: '{entity}: {action}'
            secondary_info:
              - relative-time
              - additional-tasks
            icon: action
            Name: Cronotermostato
          time_step: 15
