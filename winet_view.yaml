title: WINET
path: winet
theme: Graphite
badges: []
cards:
  - type: tile
    entity: climate.piazzetta
    show_entity_picture: true
    entity_picture: /local/Pictures/P963.png
    hide_state: false
    color: accent
    name: 'Termostato '
    state_content:
      - state
      - current_temperature
      - temperature
    features:
      - type: climate-hvac-modes
        hvac_modes:
          - 'off'
          - heat
  - type: entities
    entities:
      - entity: sensor.status_description_stufa
        icon: mdi:state-machine
        name: Stato
        secondary_info: none
        card_mod:
          style: |
            :host {
              font-size: 20px;         
              {% if states('sensor.status_description_stufa') == "OFF" %}
              --paper-item-icon-color: red;
              color: red;
              {% else %}
              --paper-item-icon-color: green;
              color: green;
              {% endif %};
            }
      - entity: sensor.temperatura_aria
        name: Ambiente
      - entity: sensor.temperatura_aria_impostata
        name: Impostazione temperatura
      - entity: sensor.potenza_impostata
        name: Potenza di funzionamento
      - entity: sensor.temperatura_fumi
        name: Temperatura estrazione fumi
      - entity: sensor.n_giri_estrattore_fumi
        name: Numero giri estrattore
      - type: conditional
        conditions:
          - entity: input_boolean.water_stufa
            state: 'on'
        row:
          entity: sensor.temperatura_impostata
      - type: conditional
        conditions:
          - entity: input_boolean.water_stufa
            state: 'on'
        row:
          entity: sensor.temperatura_acqua_impostata
      - type: divider
      - type: custom:paper-buttons-row
        position: center
        buttons:
          - icon: hass:cog-outline
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                  style: |
                    --popup-background-color:
                      var(--secondary-background-color);
                    --dialog-backdrop-filter: blur(2em) brightness(0.75);                
                  dismissable: true
                  autoclose: false
                  title: impostazioni
                  size: normal
                  right_button: Close
                  content:
                    type: custom:layout-card
                    layout_type: masonry
                    layout: {}
                    cards:
                      - type: vertical-stack
                        title: Impostazioni
                        cards:
                          - type: entities
                            entities:
                              - entity: input_boolean.water_stufa
                                name: Visual. temperatura acqua
                              - entity: input_boolean.potenze_winet
                                name: Gestisci valori potenza
                              - entity: input_boolean.attiva_cronotermostato
                          - features:
                              - style: slider
                                type: numeric-input
                            type: tile
                            entity: input_number.scegli_temperatura
                            vertical: false
                            icon_tap_action:
                              action: call-service
                              service: rest_command.set_temperatura
                              target: {}
                            show_entity_picture: true
                            hide_state: false
                            icon: mdi:content-save
                            name: Temperatura impostata
                            color: cyan
                            card_mod:
                              style:
                                ha-tile-info$: |
                                  .secondary {
                                    font-size: 20px !important;
                                  } 
                                  .primary {
                                    color: var(--entity-warning-color) !important;
                                  }
                          - features:
                              - style: slider
                                type: numeric-input
                            type: tile
                            entity: input_number.scegli_temperatura_water
                            name: Temperatura acqua
                            icon_tap_action:
                              action: call-service
                              service: rest_command.set_temperatura_water
                              target: {}
                            icon: mdi:content-save
                            hide_state: false
                            color: light-blue
                            card_mod:
                              style:
                                ha-tile-info$: |
                                  .secondary {
                                    font-size: 20px !important;
                                  } 
                                  .primary {
                                    color: var(--entity-warning-color) !important;
                                  }
                          - features:
                              - type: select-options
                            type: tile
                            entity: input_select.seleziona_potenza
                            name: Potenza funzionamento
                            color: red
                            icon: mdi:content-save
                            vertical: false
                            hide_state: true
                            icon_tap_action:
                              action: call-service
                              service: rest_command.set_power
                              target: {}
                          - type: tile
                            entity: input_text.valore_ip_locale_stufa
                            color: brown
                            show_entity_picture: false
                            state_content: state
                            icon_tap_action:
                              action: call-service
                              service: ''
                            card_mod:
                              style:
                                ha-tile-info$: |
                                  .secondary {
                                    font-size: 20px !important;
                                  } 
                                  .primary {
                                    color: var(--entity-warning-color) !important;
                                  }   
          - icon: mdi:chart-line
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: browser_mod.popup
                data:
                data:
                  style: |
                    --popup-background-color:
                      var(--secondary-background-color);
                    --dialog-backdrop-filter: blur(2em) brightness(0.75);                
                  dismissable: true
                  autoclose: false
                  title: Grafico temperature nelle 6 ore
                  size: normal
                  right_button: Close
                  content:
                    type: custom:layout-card
                    layout_type: masonry
                    layout: {}
                    cards:
                      - type: history-graph
                        entities:
                          - entity: sensor.temperatura_aria
                          - entity: sensor.temperatura_aria_impostata
                        hours_to_show: 6
                        title: Variazione Temperature in 6 ore
    title: FUNZIONAMENTO
    card_mod:
      style: |
        ha-card {
          font-family: oswald;
          font-size: 20px;

        }
  - type: vertical-stack
    cards:
      - type: horizontal-stack
        cards:
          - type: gauge
            entity: sensor.n_giri_estrattore_fumi
            unit: rpm
            needle: true
            severity:
              green: 1000
              yellow: 1999
              red: 3000
            max: 3500
          - type: gauge
            entity: sensor.potenza_impostata
            min: 1
            max: 9
            needle: true
            severity:
              green: 0
              yellow: 0
              red: 0
      - type: conditional
        conditions:
          - condition: state
            entity: input_boolean.attiva_cronotermostato
            state: 'on'
        card:
          type: custom:scheduler-card
          include:
            - climate
            - climate.piazzetta
          exclude:
            - climate.camera_matteo
            - climate.comet_dect_1
            - climate.matrimoniale
          title: true
          sort_by:
            - state
            - relative-time
          display_options:
            primary_info: '{entity}: {action}'
            secondary_info:
              - relative-time
              - additional-tasks
            icon: action
            Name: Cronotermostato
          time_step: 15
